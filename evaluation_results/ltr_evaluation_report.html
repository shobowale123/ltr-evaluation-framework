
<!DOCTYPE html>
<html>
<head>
    <title>ltr_evaluation_report</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 40px; }
        h1 { color: #2c3e50; }
        h2 { color: #34495e; margin-top: 30px; }
        h3 { color: #7f8c8d; }
        table { border-collapse: collapse; width: 100%; margin: 20px 0; }
        th, td { border: 1px solid #ddd; padding: 12px; text-align: left; }
        th { background-color: #3498db; color: white; }
        tr:nth-child(even) { background-color: #f2f2f2; }
        .metric-good { color: #27ae60; font-weight: bold; }
        .metric-poor { color: #e74c3c; font-weight: bold; }
    </style>
</head>
<body>
    <h1>ltr_evaluation_report</h1>
    <p><em>Generated: 2026-01-15 13:59:08</em></p>

<h2>1. Executive Summary</h2>
<div>
<p><strong>Total Queries:</strong> 24</p>
<p><strong>Total Evaluations:</strong> 78</p>
<p><strong>Best Recall@K:</strong> 1.0000 at K=1</p>
<p><strong>Best Precision@K:</strong> 1.0000 at K=1</p>
</div>
<h2>2. Detailed Metrics</h2>
<h3>Recall@K</h3>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>K</th>
      <th>Macro_Avg</th>
      <th>Weighted_Avg</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>1.0000</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>3</td>
      <td>0.9333</td>
      <td>0.9444</td>
    </tr>
    <tr>
      <td>5</td>
      <td>1.0000</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>6</td>
      <td>1.0000</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>10</td>
      <td>0.9895</td>
      <td>0.9976</td>
    </tr>
    <tr>
      <td>15</td>
      <td>0.9111</td>
      <td>0.9111</td>
    </tr>
    <tr>
      <td>20</td>
      <td>1.0000</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>28</td>
      <td>0.9375</td>
      <td>0.9375</td>
    </tr>
    <tr>
      <td>36</td>
      <td>0.9028</td>
      <td>0.9028</td>
    </tr>
    <tr>
      <td>45</td>
      <td>0.9556</td>
      <td>0.9556</td>
    </tr>
    <tr>
      <td>50</td>
      <td>0.9967</td>
      <td>0.9979</td>
    </tr>
    <tr>
      <td>55</td>
      <td>0.9273</td>
      <td>0.9273</td>
    </tr>
    <tr>
      <td>66</td>
      <td>0.9545</td>
      <td>0.9545</td>
    </tr>
    <tr>
      <td>78</td>
      <td>0.9295</td>
      <td>0.9295</td>
    </tr>
    <tr>
      <td>120</td>
      <td>0.9167</td>
      <td>0.9167</td>
    </tr>
  </tbody>
</table>
<h3>Precision@K</h3>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>K</th>
      <th>Macro_Avg</th>
      <th>Weighted_Avg</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>1</td>
      <td>1.0000</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>3</td>
      <td>0.9333</td>
      <td>0.9444</td>
    </tr>
    <tr>
      <td>5</td>
      <td>1.0000</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>6</td>
      <td>1.0000</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>10</td>
      <td>0.9895</td>
      <td>0.9976</td>
    </tr>
    <tr>
      <td>15</td>
      <td>0.9111</td>
      <td>0.9111</td>
    </tr>
    <tr>
      <td>20</td>
      <td>1.0000</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>28</td>
      <td>0.9375</td>
      <td>0.9375</td>
    </tr>
    <tr>
      <td>36</td>
      <td>0.9028</td>
      <td>0.9028</td>
    </tr>
    <tr>
      <td>45</td>
      <td>0.9556</td>
      <td>0.9556</td>
    </tr>
    <tr>
      <td>50</td>
      <td>0.9967</td>
      <td>0.9979</td>
    </tr>
    <tr>
      <td>55</td>
      <td>0.9273</td>
      <td>0.9273</td>
    </tr>
    <tr>
      <td>66</td>
      <td>0.9545</td>
      <td>0.9545</td>
    </tr>
    <tr>
      <td>78</td>
      <td>0.9295</td>
      <td>0.9295</td>
    </tr>
    <tr>
      <td>120</td>
      <td>0.9167</td>
      <td>0.9167</td>
    </tr>
  </tbody>
</table>
<h2>3. Stratified Analysis</h2>
<h3>Recall</h3>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Stratum</th>
      <th>K</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Low (3-10 relevant)</td>
      <td>1</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Low (3-10 relevant)</td>
      <td>3</td>
      <td>0.9333</td>
    </tr>
    <tr>
      <td>Low (3-10 relevant)</td>
      <td>5</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Low (3-10 relevant)</td>
      <td>6</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Low (3-10 relevant)</td>
      <td>10</td>
      <td>0.9333</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>5</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>10</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>15</td>
      <td>0.9111</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>20</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>28</td>
      <td>0.9375</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>36</td>
      <td>0.9028</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>45</td>
      <td>0.9556</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>10</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>20</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>50</td>
      <td>0.9967</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>55</td>
      <td>0.9273</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>66</td>
      <td>0.9545</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>78</td>
      <td>0.9295</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>120</td>
      <td>0.9167</td>
    </tr>
  </tbody>
</table>
<h3>Precision</h3>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>Stratum</th>
      <th>K</th>
      <th>Value</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Low (3-10 relevant)</td>
      <td>1</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Low (3-10 relevant)</td>
      <td>3</td>
      <td>0.9333</td>
    </tr>
    <tr>
      <td>Low (3-10 relevant)</td>
      <td>5</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Low (3-10 relevant)</td>
      <td>6</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Low (3-10 relevant)</td>
      <td>10</td>
      <td>0.9333</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>5</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>10</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>15</td>
      <td>0.9111</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>20</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>28</td>
      <td>0.9375</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>36</td>
      <td>0.9028</td>
    </tr>
    <tr>
      <td>Medium (11-50 relevant)</td>
      <td>45</td>
      <td>0.9556</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>10</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>20</td>
      <td>1.0000</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>50</td>
      <td>0.9967</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>55</td>
      <td>0.9273</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>66</td>
      <td>0.9545</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>78</td>
      <td>0.9295</td>
    </tr>
    <tr>
      <td>High (51+ relevant)</td>
      <td>120</td>
      <td>0.9167</td>
    </tr>
  </tbody>
</table>
<h2>4. Query Statistics</h2>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>n_pos</th>
      <th>n_neg</th>
      <th>n_total</th>
      <th>imbalance_ratio</th>
      <th>pos_ratio</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>count</th>
      <td>24.00</td>
      <td>24.00</td>
      <td>24.00</td>
      <td>24.00</td>
      <td>24.00</td>
    </tr>
    <tr>
      <th>mean</th>
      <td>34.96</td>
      <td>1662.29</td>
      <td>1697.25</td>
      <td>93.24</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>std</th>
      <td>34.78</td>
      <td>1030.86</td>
      <td>1060.76</td>
      <td>81.96</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>min</th>
      <td>3.00</td>
      <td>510.00</td>
      <td>513.00</td>
      <td>24.74</td>
      <td>0.00</td>
    </tr>
    <tr>
      <th>25%</th>
      <td>10.00</td>
      <td>1054.00</td>
      <td>1066.00</td>
      <td>40.91</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>50%</th>
      <td>28.00</td>
      <td>1376.00</td>
      <td>1408.00</td>
      <td>66.30</td>
      <td>0.01</td>
    </tr>
    <tr>
      <th>75%</th>
      <td>47.50</td>
      <td>1961.25</td>
      <td>2001.75</td>
      <td>100.90</td>
      <td>0.02</td>
    </tr>
    <tr>
      <th>max</th>
      <td>120.00</td>
      <td>4966.00</td>
      <td>5086.00</td>
      <td>345.33</td>
      <td>0.04</td>
    </tr>
  </tbody>
</table>

</body>
</html>
